<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í—¬ìŠ¤ì¥ ê·¸ë£¹ìˆ˜ì—… ì¶œì„ê´€ë¦¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="min-h-screen bg-gray-50">
    <div id="app"></div>

    <script>
        // ì•„ì´ì½˜ ìƒì„± í•¨ìˆ˜
        function createIcon(name, className = "w-5 h-5") {
            const iconElement = document.createElement('i');
            iconElement.setAttribute('data-lucide', name);
            iconElement.className = className;
            return iconElement;
        }

        // ìˆ˜ì—…ë³„ ê³ ì • íšŒì› ë°ì´í„°
        let classMembers = {
            'ì›”-09:00-ë‹¤ì´ì–´íŠ¸ëŒ„ìŠ¤-ìœ¤ì—°ì¬': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'ê³½ì •ìˆœ', 'êµ­ì§„', 'ê¶Œì¸ìˆœ', 'ê¹€ê²½ìˆ™', 'ê¹€ê¸ˆì£¼', 'ê¹€ë¯¼ì„ ', 'ê¹€ë³´ê²½', 'ê¹€ì˜ë¯¸', 'ê¹€ì€ì', 'ê¹€í˜œì§„', 'ë‚˜ì •ì', 'ë°•ë‚œí¬', 'ë°•í•˜ì„±', 'ë°±ë¬¸í¬', 'ì„œì˜ì„ ', 'ì†ìœ¤ì', 'ì†¡ê²½ë‚¨', 'ì•ˆíš¨ì •', 'ì—„ì •ìˆœ', 'ìœ í˜¸ì˜', 'ìœ¤ìƒì§„', 'ì´ìˆ™ì´', 'ì´ìˆœì• ', 'ì´ìœ¤í¬', 'ì´ì¢…ê¸ˆ', 'ì´ì¶©ë‚¨', 'ì„ê²½ë€', 'ì„ì •ìˆ™', 'ì „ì˜ˆë¹ˆ', 'ì •ë¯¸', 'ì •ì• ë€', 'ì •ì˜¥ì˜', 'ì •íƒœí¬', 'ì¡°ì„ ë…€', 'ìµœëª…í¬', 'ìµœì˜ê²½'],
            'ì›”-10:00-ìš”ê°€-ì‹¬í¬ê²½': ['ê°•ì˜¥ìˆœ', 'êµ­ì§„', 'ê¹€ê¸ˆì£¼', 'ê¹€ë´‰ìˆœ', 'ê¹€ì˜ë¯¸', 'ê¹€ì€ì', 'ê¹€í˜œì§„', 'ë¬¸ì€ê²½', 'ë°•í•˜ì„±', 'ë°±ë¬¸í¬', 'ë°±ì¸ì˜¥', 'ì„œìˆœì„', 'ì„œì²­ìˆœ', 'ì†ìš©ì', 'ì‹ ë™ì£¼', 'ì•ˆíš¨ì •', 'ì—„ì •ìˆœ', 'ìœ¤ìƒì§„', 'ì´ì—°í–‰', 'ì´ìœ¤í¬', 'ì´ì¶©ë‚¨', 'ì„ê²½ë€', 'ì¥ìŠ¹ì›', 'ì „ì¬ì€', 'ì •ë‘ì„ ', 'ì •ë¯¸', 'ì •ì˜¥ì˜', 'ì¡°ì„ ë…€'],
            'í™”-09:00-ìš”ê°€-ì‹¬í¬ê²½': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'êµ­ì§„', 'ê¹€ê¸ˆì£¼', 'ê¹€ë´‰ìˆœ', 'ê¹€ìˆœë¡€', 'ê¹€ì€ì', 'ê¹€í˜œì§„', 'ë¬¸ì€ê²½', 'ë°±ë¬¸í¬', 'ì„œìˆœì„', 'ì„œì²­ìˆœ', 'ì†ìš©ì', 'ì—„ì •ìˆœ', 'ìœ¤ìƒì§„', 'ì´ìˆœì• ', 'ì´ì¶©ë‚¨', 'ì„ê²½ë€', 'ì¥ìŠ¹ì›', 'ì „ì˜ˆë¹ˆ', 'ì •ë‘ì„ ', 'ì •íƒœí¬', 'ì¡°ì„ ë…€', 'ìµœëª…í¬'],
            'í™”-10:00-ì¤Œë°”-JESSI': ['ê°•ìˆœë•', 'êµ­ì§„', 'ê¶Œì¸ìˆœ', 'ê¹€ê²½ìˆ™', 'ê¹€ê¸ˆì£¼', 'ê¹€ë‚˜ì˜', 'ê¹€ë¯¼ì„ ', 'ê¹€ë³´ê²½', 'ê¹€ì˜¥ì„ ', 'ê¹€ì˜¥ìˆœ', 'ê¹€ìœ ì‹', 'ê¹€ì€ì', 'ê¹€ì •í˜œ', 'ê¹€í˜œì§„', 'ë‚˜ì •ì', 'ë°•ë‚œí¬', 'ë°•ì†Œí˜„', 'ë°•ì§€ì—°', 'ë°•í•˜ì„±', 'ë°±ë¬¸í¬', 'ì„œìˆœì„', 'ì„œì—°ì„ ', 'ì„œì²­ìˆœ', 'ì†¡ê²½ë€', 'ì–‘ì •ì¸', 'ì—„ì •ìˆœ', 'ì˜¤ì—°ìˆœ', 'ìœ ì•„ëŒ', 'ìœ¤ìƒì§„', 'ìœ¤ì€ì£¼', 'ì´ë³´ë¼', 'ì´ìˆ™ì´', 'ì´ìˆœì• ', 'ì´ìœ¤í¬', 'ì´ì€ë¯¸', 'ì„ê²½ë€', 'ì¥ìˆœí¬', 'ì „ì˜ˆë¹ˆ', 'ì •ì• ë€', 'ì •íƒœí¬', 'ì¡°ëª…í™”', 'ì¡°ì„ ë…€', 'ìµœëª…í¬', 'ìµœì˜ê²½'],
            'í™”-11:00-ì¤Œë°”-ì„ìœ ë‚˜': ['ê¹€ë•ì', 'ê¹€ì¬ì˜¥', 'ë‚˜ì›ì', 'ë…¸ë¯¸í¬', 'ë¬¸ì€ê²½', 'ë°•ë¯¸ìˆ™', 'ë°•ì—°í¬', 'ë°°ì€ì‹¬', 'ì†¡ì£¼ì›', 'ìœ ì—°ì´', 'ì´ê²½í¬', 'ì´ì—°í–‰', 'ì „ìŠ¹í¬', 'ì •ì˜¥ê²½', 'ì •ì¬ì€', 'ì±„ìŠ¹ì˜¥', 'ì¶”ì¸ìˆ™', 'í™ì •í¬'],
            'ìˆ˜-09:00-ë‹¤ì´ì–´íŠ¸ëŒ„ìŠ¤-ìœ¤ì—°ì¬': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'êµ­ì§„', 'ê¹€ê¸ˆì£¼', 'ê¹€ë‚˜ì˜', 'ê¹€ë¯¼ì„ ', 'ê¹€ë³´ê²½', 'ê¹€ìˆœë¡€', 'ê¹€í˜œì§„', 'ë‚˜ì •ì', 'ë°•ë‚œí¬', 'ë°•í•˜ì„±', 'ë°±ë¬¸í¬', 'ì†ì˜', 'ì†¡ê²½ë‚¨', 'ì—„ì •ìˆœ', 'ìœ í˜¸ì˜', 'ì´ìˆ™ì´', 'ì´ìˆœì• ', 'ì´ìœ¤í¬', 'ì´ì¶©ë‚¨', 'ì„ê²½ë€', 'ì „ì˜ˆë¹ˆ', 'ì •ì• ë€', 'ì •ì˜¥ì˜', 'ì •íƒœí¬', 'ì¡°ì„ ë…€', 'ìµœëª…í¬', 'ìµœì˜ê²½'],
            'ìˆ˜-10:00-í‚¥ì•¤ê·¼ë ¥-ê¹€ì¶©ì‹': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'ê¹€ê°‘ì', 'ê¹€ê¸ˆì£¼', 'ê¹€ë‚˜ì˜', 'ê¹€ë•ì', 'ê¹€ë³´ê²½', 'ê¹€ë´‰ìˆœ', 'ê¹€ì€ì', 'ê¹€ì¬ì˜¥', 'ê¹€ì •í˜œ', 'ê¹€í˜œì§„', 'ë‚˜ì›ì', 'ë‚˜ì •ì', 'ë°•ì„ í˜œ', 'ë°•í•˜ì„±', 'ë°°ì€ì‹¬', 'ë°±ë¬¸í¬', 'ë°±ì¸ì˜¥', 'ì„œìˆœì„', 'ì„œì²­ìˆœ', 'ìœ ì—°ì´', 'ì´ê·€ìˆ™', 'ì´ìœ¤í¬', 'ì´í˜œì—´', 'ì„ê²½ë€', 'ì „ì˜ˆë¹ˆ', 'ì •ë‘ì„ ', 'ì •ì˜¥ì˜', 'ì •ìš°ì˜', 'ì •íƒœí¬', 'ì¡°ì„ ë…€', 'í™ì •í¬'],
            'ëª©-09:00-ìš”ê°€-ì‹¬í¬ê²½': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'ê¹€ê¸ˆì£¼', 'ê¹€ë³´ê²½', 'ê¹€ìˆœë¡€', 'ê¹€ì€ì', 'ê¹€í˜œì§„', 'ë¬¸ì€ê²½', 'ë°±ë¬¸í¬', 'ì„œìˆœì„', 'ì„œì²­ìˆœ', 'ì†ìš©ì', 'ì—„ì •ìˆœ', 'ìœ¤ìƒì§„', 'ì´ìˆœì• ', 'ì´ì—°í–‰', 'ì´ì¶©ë‚¨', 'ì„ê²½ë€', 'ì¥ìŠ¹ì›', 'ì „ì˜ˆë¹ˆ', 'ì •ë‘ì„ ', 'ì •íƒœí¬', 'ì¡°ì„ ë…€', 'ìµœëª…í¬'],
            'ëª©-10:00-ì¤Œë°”-JESSI': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'êµ­ì§„', 'ê¹€ê²½ìˆ™', 'ê¹€ê¸ˆì£¼', 'ê¹€ë‚˜ì˜', 'ê¹€ë¯¼ì„ ', 'ê¹€ë³´ê²½', 'ê¹€ìˆœë¡€', 'ê¹€ìˆœì´', 'ê¹€ì˜ë¯¸', 'ê¹€ì˜¥ì„ ', 'ê¹€ìœ ì‹', 'ê¹€ì€ì', 'ê¹€ì •í˜œ', 'ê¹€í˜œì§„', 'ë‚˜ì •ì', 'ë°•ë‚œí¬', 'ë°•ì†Œí˜„', 'ë°•ì§€ì—°', 'ë°•í•˜ì„±', 'ë°±ë¬¸í¬', 'ì†¡ê²½ë‚¨', 'ì–‘ì •ì¸', 'ì—„ì •ìˆœ', 'ìœ ì•„ëŒ', 'ìœ¤ì€ì£¼', 'ì´ìˆ™ì´', 'ì´ìˆœì• ', 'ì´ìœ¤í¬', 'ì´ì€ë¯¸', 'ì„ê²½ë€', 'ì¥ìˆœí¬', 'ì „ì˜ˆë¹ˆ', 'ì •ì• ë€', 'ì •íƒœí¬', 'ì¡°ëª…í™”', 'ì¡°ì„ ë…€', 'ìµœëª…í¬', 'ìµœì˜ê²½', 'ì„œì˜ì„ ', 'ì´ë³´ë¼', 'ì˜¤ì—°ìˆœ', 'ì •ë¯¸', 'ìœ¤ìƒì§„', 'ê¹€í˜„ìˆ™'],
            'ëª©-11:00-ì¤Œë°”-ì„ìœ ë‚˜': ['ê¹€ë•ì', 'ê¹€ì¬ì˜¥', 'ë‚˜ì›ì', 'ë…¸ë¯¸í¬', 'ë¬¸ì€ê²½', 'ë°•ë¯¸ê²½', 'ë°•ë¯¸ìˆ™', 'ë°•ì—°í¬', 'ë°•í•˜ì„±', 'ë°°ì€ì‹¬', 'ì†¡ì£¼ì›', 'ìœ ì—°ì´', 'ì´ê²½í¬', 'ì´ì—°í–‰', 'ì´í¬ìˆ˜', 'ì •ì˜¥ì˜', 'ì±„ìŠ¹ì˜¥', 'ì¶”ì¸ìˆ™', 'í™ì •í¬'],
            'ê¸ˆ-09:00-ë‹¤ì´ì–´íŠ¸ëŒ„ìŠ¤-ìœ¤ì—°ì¬': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'êµ­ì§„', 'ê¶Œì •ìˆ™', 'ê¹€ê²½ìˆ™', 'ê¹€ê¸ˆì£¼', 'ê¹€ë‚˜ì˜', 'ê¹€ë¯¼ì„ ', 'ê¹€ë³´ê²½', 'ê¹€ìˆœë¡€', 'ê¹€ì˜ë¯¸', 'ê¹€ì˜ìˆ™', 'ê¹€ì€ì', 'ê¹€í˜œì§„', 'ë‚˜ì •ì', 'ë°•ë‚œí¬', 'ë°±ë¬¸í¬', 'ì„œì˜ì„ ', 'ì†ìš©ì', 'ì†¡ê²½ë‚¨', 'ì—„ì •ìˆœ', 'ìœ¤ìƒì§„', 'ì´ìˆ™ì´', 'ì´ìˆœì• ', 'ì´ìš´ìˆ™', 'ì´ìœ¤í¬', 'ì´ì¶©ë‚¨', 'ì„ê²½ë€', 'ì¥ìˆœí¬', 'ì „ì˜ˆë¹ˆ', 'ì •ë¯¸', 'ì •ì• ë€', 'ì •ì˜¥ì˜', 'ì •íƒœí¬', 'ì¡°ì„ ë…€', 'ìµœëª…í¬', 'ìµœì˜ê²½'],
            'ê¸ˆ-10:00-ê·¼ë ¥-ì´ì•„ë€': ['ê°•ìˆœë•', 'ê°•ì˜¥ìˆœ', 'ê¹€ê¸ˆì£¼', 'ê¹€ë‚˜ì˜', 'ê¹€ë•ì', 'ê¹€ë³´ê²½', 'ê¹€ë´‰ìˆœ', 'ê¹€ì˜ë¯¸', 'ê¹€ì€ì', 'ê¹€í˜œì§„', 'ë‚˜ì›ì', 'ë°•ì„ í˜œ', 'ë°•í•˜ì„±', 'ë°°ì€ì‹¬', 'ë°±ë¬¸í¬', 'ë°±ì¸ì˜¥', 'ì•ˆíš¨ì •', 'ì´ê·€ìˆ™', 'ì´ì—°í–‰', 'ì´ì¶©ë‚¨', 'ì„ê²½ë€', 'ì „ì˜ˆë¹ˆ', 'ì •ë¯¸', 'ì •ì˜¥ì˜', 'ì •ì¬ì€', 'ì •íƒœí¬', 'ì¡°ì„ ë…€', 'í™ì •í¬', 'ì¡°ëª…í™”']
        };

        // ìƒíƒœ ê´€ë¦¬
        let state = {
            selectedDate: new Date().toISOString().split('T')[0],
            selectedClass: '',
            attendance: {},
            attendanceHistory: JSON.parse(localStorage.getItem('attendanceHistory') || '{}'),
            sortOrder: 'korean',
            showAddMember: false,
            newMemberName: '',
            showAttendanceList: false
        };

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ íšŒì› ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        const savedMembers = localStorage.getItem('classMembers');
        if (savedMembers) {
            classMembers = JSON.parse(savedMembers);
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('classMembers', JSON.stringify(classMembers));
            localStorage.setItem('attendanceHistory', JSON.stringify(state.attendanceHistory));
        }

        // ğŸ†• ë°ì´í„° ë°±ì—… (ë‹¤ìš´ë¡œë“œ)
        function backupData() {
            const backupData = {
                classMembers: classMembers,
                attendanceHistory: state.attendanceHistory,
                backupDate: new Date().toISOString(),
                version: "1.0"
            };
            
            const dataStr = JSON.stringify(backupData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `í—¬ìŠ¤ì¥ì¶œì„ë°ì´í„°_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('ë°±ì—… íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“±â†”ï¸ğŸ’»');
        }

        // ğŸ†• ë°ì´í„° ë³µì› (ì—…ë¡œë“œ)
        function restoreData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    if (confirm('ê¸°ì¡´ ë°ì´í„°ê°€ ëª¨ë‘ ë°”ë€ë‹ˆë‹¤. ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        classMembers = backupData.classMembers || classMembers;
                        state.attendanceHistory = backupData.attendanceHistory || {};
                        
                        saveData();
                        alert('ë°ì´í„°ê°€ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤! âœ…');
                        render();
                    }
                } catch (error) {
                    alert('ì˜ëª»ëœ ë°±ì—… íŒŒì¼ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                }
            };
            reader.readAsText(file);
            
            // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
            event.target.value = '';
        }

        // ìˆ˜ì—… ëª©ë¡ ìƒì„±
        function getClassList() {
            return Object.keys(classMembers).map(key => {
                const [day, time, className, instructor] = key.split('-');
                return { key, display: `${day} ${time} ${className} (${instructor})` };
            });
        }

        // ìš”ì¼ë³„ ìˆ˜ì—… ê·¸ë£¹í™”
        function getClassesByDay() {
            const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'];
            const classList = getClassList();
            return days.map(day => ({
                day,
                classes: classList.filter(cls => cls.key.startsWith(day))
            }));
        }

        // ìš”ì¼ í‘œì‹œ
        function getDayOfWeek(dateString) {
            const days = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
            const date = new Date(dateString);
            return days[date.getDay()];
        }

        // í˜„ì¬ íšŒì› ëª©ë¡
        function getCurrentMembers() {
            return state.selectedClass ? classMembers[state.selectedClass] || [] : [];
        }

        // ì •ë ¬ëœ íšŒì› ëª©ë¡
        function getSortedMembers() {
            const members = getCurrentMembers();
            if (state.sortOrder === 'korean') {
                return [...members].sort((a, b) => a.localeCompare(b, 'ko-KR'));
            }
            return [...members].sort();
        }

        // ì¶œì„í•œ íšŒì› ëª©ë¡
        function getAttendedMembers() {
            return getCurrentMembers().filter(member => state.attendance[member]);
        }

        // ì¶œì„ í†µê³„
        function getAttendanceStats() {
            const total = getCurrentMembers().length;
            const present = Object.values(state.attendance).filter(Boolean).length;
            return { total, present, rate: total > 0 ? Math.round((present / total) * 100) : 0 };
        }

        // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë“¤
        function handleDateChange(event) {
            state.selectedDate = event.target.value;
            loadAttendanceData();
            render();
        }

        function handleClassChange(event) {
            state.selectedClass = event.target.value;
            loadAttendanceData();
            render();
        }

        function loadAttendanceData() {
            if (state.selectedDate && state.selectedClass) {
                const key = `${state.selectedDate}_${state.selectedClass}`;
                state.attendance = state.attendanceHistory[key] || {};
            }
        }

        function toggleAttendance(memberName) {
            state.attendance[memberName] = !state.attendance[memberName];
            render();
        }

        function selectAll() {
            const members = getSortedMembers();
            const allSelected = members.every(member => state.attendance[member]);
            members.forEach(member => {
                state.attendance[member] = !allSelected;
            });
            render();
        }

        function saveAttendance() {
            if (!state.selectedDate || !state.selectedClass) {
                alert('ë‚ ì§œì™€ ìˆ˜ì—…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const key = `${state.selectedDate}_${state.selectedClass}`;
            state.attendanceHistory[key] = { ...state.attendance };
            saveData();
            alert('ì¶œì„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function addMember() {
            if (!state.selectedClass) {
                alert('ìˆ˜ì—…ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (state.newMemberName.trim() && !classMembers[state.selectedClass].includes(state.newMemberName.trim())) {
                classMembers[state.selectedClass].push(state.newMemberName.trim());
                saveData();
                state.newMemberName = '';
                state.showAddMember = false;
                alert(`${state.newMemberName.trim()} íšŒì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                render();
            } else if (classMembers[state.selectedClass].includes(state.newMemberName.trim())) {
                alert('ì´ë¯¸ ë“±ë¡ëœ íšŒì›ì…ë‹ˆë‹¤.');
            }
        }

        function removeMember(memberName) {
            if (confirm(`${memberName} íšŒì›ì„ ì´ ìˆ˜ì—…ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                classMembers[state.selectedClass] = classMembers[state.selectedClass].filter(m => m !== memberName);
                delete state.attendance[memberName];
                saveData();
                alert(`${memberName} íšŒì›ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                render();
            }
        }

        function copyAttendanceList() {
            const attendedMembers = getAttendedMembers();
            const attendanceText = attendedMembers.join('\n');
            
            navigator.clipboard.writeText(attendanceText).then(() => {
                alert('ì¶œì„ ëª…ë‹¨ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = attendanceText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('ì¶œì„ ëª…ë‹¨ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        // ë Œë”ë§ í•¨ìˆ˜
        function render() {
            const classList = getClassList();
            const stats = getAttendanceStats();
            
            const app = document.getElementById('app');
            app.innerHTML = `
                <div class="min-h-screen bg-gray-50 p-4">
                    <div class="max-w-4xl mx-auto">
                        <!-- í—¤ë” -->
                        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center gap-3">
                                    <i data-lucide="users" class="w-8 h-8 text-blue-600"></i>
                                    <h1 class="text-2xl font-bold text-gray-800">ê·¸ë£¹ìˆ˜ì—… ì¶œì„ê´€ë¦¬</h1>
                                </div>
                                
                                <!-- ğŸ†• ë°±ì—…/ë³µì› ë²„íŠ¼ -->
                                <div class="flex gap-2">
                                    <button
                                        onclick="backupData()"
                                        class="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"
                                        title="ë°ì´í„° ë°±ì—… (ë‹¤ìš´ë¡œë“œ)"
                                    >
                                        <i data-lucide="download" class="w-4 h-4"></i>
                                        ë°±ì—…
                                    </button>
                                    <label class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm cursor-pointer"
                                           title="ë°ì´í„° ë³µì› (ì—…ë¡œë“œ)">
                                        <i data-lucide="upload" class="w-4 h-4"></i>
                                        ë³µì›
                                        <input type="file" accept=".json" onchange="restoreData(event)" class="hidden" />
                                    </label>
                                </div>
                            </div>

                            <!-- ë‚ ì§œ ë° ìˆ˜ì—… ì„ íƒ -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        <i data-lucide="calendar" class="w-4 h-4 inline mr-1"></i>
                                        ìˆ˜ì—… ë‚ ì§œ
                                    </label>
                                    <input
                                        type="date"
                                        value="${state.selectedDate}"
                                        onchange="handleDateChange(event)"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                    ${state.selectedDate ? `<div class="mt-2 text-sm text-blue-600 font-medium">${getDayOfWeek(state.selectedDate)}</div>` : ''}
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ìˆ˜ì—… ì„ íƒ</label>
                                    <select
                                        onchange="handleClassChange(event)"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    >
                                        <option value="">ìˆ˜ì—…ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                        ${getClassesByDay().map(dayGroup => `
                                            <optgroup label="${dayGroup.day}ìš”ì¼">
                                                ${dayGroup.classes.map(cls => `
                                                    <option value="${cls.key}" ${state.selectedClass === cls.key ? 'selected' : ''}>${cls.display}</option>
                                                `).join('')}
                                            </optgroup>
                                        `).join('')}
                                    </select>
                                </div>
                            </div>
                        </div>

                        ${state.selectedClass ? `
                        <!-- ìˆ˜ì—… ì •ë³´ -->
                        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-gray-800">ìˆ˜ì—… ì •ë³´</h2>
                                <div class="flex gap-2">
                                    <select
                                        onchange="state.sortOrder = event.target.value; render();"
                                        class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    >
                                        <option value="korean" ${state.sortOrder === 'korean' ? 'selected' : ''}>ê°€ë‚˜ë‹¤ìˆœ</option>
                                        <option value="alphabetic" ${state.sortOrder === 'alphabetic' ? 'selected' : ''}>ABCìˆœ</option>
                                    </select>
                                    <button
                                        onclick="state.showAddMember = !state.showAddMember; render();"
                                        class="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"
                                    >
                                        <i data-lucide="users" class="w-4 h-4"></i>
                                        íšŒì› ì¶”ê°€
                                    </button>
                                </div>
                            </div>

                            ${state.showAddMember ? `
                            <div class="mb-4 p-4 bg-green-50 rounded-lg">
                                <div class="flex gap-2">
                                    <input
                                        type="text"
                                        value="${state.newMemberName}"
                                        oninput="state.newMemberName = event.target.value"
                                        onkeypress="if(event.key === 'Enter') addMember()"
                                        placeholder="íšŒì› ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                        class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                    />
                                    <button
                                        onclick="addMember()"
                                        class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                                    >
                                        ì¶”ê°€
                                    </button>
                                    <button
                                        onclick="state.showAddMember = false; render();"
                                        class="px-4 py-3 bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors"
                                    >
                                        ì·¨ì†Œ
                                    </button>
                                </div>
                                <div class="mt-2 text-sm text-green-700">
                                    í˜„ì¬ ì„ íƒëœ ìˆ˜ì—…: ${classList.find(cls => cls.key === state.selectedClass)?.display}
                                </div>
                            </div>
                            ` : ''}

                            <div class="bg-blue-50 p-4 rounded-lg mb-4">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <span class="text-sm text-gray-600">ë“±ë¡ íšŒì›: </span>
                                        <span class="text-lg font-bold text-blue-600">${getCurrentMembers().length}ëª…</span>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-600">ì¶œì„ë¥ : </span>
                                        <span class="text-lg font-bold text-blue-600">${stats.present}/${stats.total}</span>
                                        <span class="text-sm text-gray-600 ml-2">(${stats.rate}%)</span>
                                    </div>
                                    <button
                                        onclick="selectAll()"
                                        class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm"
                                    >
                                        ì „ì²´ ${Object.values(state.attendance).every(Boolean) ? 'í•´ì œ' : 'ì„ íƒ'}
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ì¶œì„ ì²´í¬ -->
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-semibold text-gray-800">
                                    ${classList.find(cls => cls.key === state.selectedClass)?.display} - ${state.selectedDate} (${getDayOfWeek(state.selectedDate)})
                                </h2>
                                <div class="flex gap-2">
                                    <button
                                        onclick="state.showAttendanceList = !state.showAttendanceList; render();"
                                        class="flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"
                                    >
                                        <i data-lucide="list" class="w-4 h-4"></i>
                                        ì¶œì„ ëª…ë‹¨
                                    </button>
                                    <button
                                        onclick="saveAttendance()"
                                        class="flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"
                                    >
                                        <i data-lucide="check-circle" class="w-5 h-5"></i>
                                        ì¶œì„ ì €ì¥
                                    </button>
                                </div>
                            </div>

                            ${state.showAttendanceList ? `
                            <!-- ì¶œì„ ëª…ë‹¨ -->
                            <div class="mb-6 p-4 bg-purple-50 border border-purple-200 rounded-lg">
                                <div class="flex justify-between items-center mb-3">
                                    <h3 class="text-lg font-semibold text-purple-800">
                                        ì¶œì„ íšŒì› ëª…ë‹¨ (${getAttendedMembers().length}ëª…)
                                    </h3>
                                    <button
                                        onclick="copyAttendanceList()"
                                        class="flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"
                                    >
                                        <i data-lucide="copy" class="w-4 h-4"></i>
                                        ëª…ë‹¨ ë³µì‚¬
                                    </button>
                                </div>
                                
                                <div class="bg-white p-4 rounded border">
                                    <div class="text-sm text-gray-600 mb-2">
                                        ìˆ˜ì—…: ${classList.find(cls => cls.key === state.selectedClass)?.display}
                                    </div>
                                    <div class="text-sm text-gray-600 mb-3">
                                        ë‚ ì§œ: ${state.selectedDate} (${getDayOfWeek(state.selectedDate)})
                                    </div>
                                    
                                    ${getAttendedMembers().length > 0 ? `
                                        <div class="font-mono text-sm bg-gray-50 p-3 rounded border max-h-60 overflow-y-auto">
                                            ${getAttendedMembers().map(member => `<div class="py-1">${member}</div>`).join('')}
                                        </div>
                                    ` : `
                                        <div class="text-gray-500 text-center py-4">
                                            ì¶œì„í•œ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.
                                        </div>
                                    `}
                                </div>
                            </div>
                            ` : ''}

                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                                ${getSortedMembers().map((member, index) => `
                                    <div
                                        onclick="toggleAttendance('${member}')"
                                        class="flex items-center justify-between p-4 rounded-lg border-2 transition-all cursor-pointer ${
                                            state.attendance[member]
                                                ? 'border-green-500 bg-green-50'
                                                : 'border-gray-200 bg-white hover:border-gray-300'
                                        }"
                                    >
                                        <span class="font-medium ${
                                            state.attendance[member] ? 'text-green-700' : 'text-gray-700'
                                        }">
                                            ${member}
                                        </span>
                                        <div class="flex items-center gap-2">
                                            <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center ${
                                                state.attendance[member]
                                                    ? 'border-green-500 bg-green-500'
                                                    : 'border-gray-300'
                                            }">
                                                ${state.attendance[member] ? '<i data-lucide="check-circle" class="w-4 h-4 text-white"></i>' : ''}
                                            </div>
                                            <button
                                                onclick="event.stopPropagation(); removeMember('${member}');"
                                                class="p-1 text-red-500 hover:bg-red-50 rounded transition-opacity"
                                                title="íšŒì› ì‚­ì œ"
                                            >
                                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>

                            ${getCurrentMembers().length === 0 ? `
                                <div class="text-center py-12 text-gray-500">
                                    ì´ ìˆ˜ì—…ì— ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.
                                </div>
                            ` : ''}
                        </div>
                        ` : `
                        <div class="bg-white rounded-lg shadow-md p-12 text-center">
                            <i data-lucide="users" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
                            <p class="text-gray-500 text-lg">
                                ë‚ ì§œì™€ ìˆ˜ì—…ì„ ì„ íƒí•˜ë©´ ì¶œì„ ì²´í¬ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </p>
                            
                            <!-- ğŸ†• ë°±ì—…/ë³µì› ì•ˆë‚´ -->
                            <div class="mt-8 p-4 bg-blue-50 rounded-lg text-left">
                                <h3 class="text-lg font-semibold text-blue-800 mb-2">
                                    ğŸ“±â†”ï¸ğŸ’» ëª¨ë°”ì¼-ì›¹ ë°ì´í„° ë™ê¸°í™” ë°©ë²•
                                </h3>
                                <div class="text-sm text-blue-700 space-y-2">
                                    <div class="flex items-start gap-2">
                                        <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded text-xs font-bold">1ë‹¨ê³„</span>
                                        <span>ëª¨ë°”ì¼ì—ì„œ <strong class="text-green-600">ë°±ì—…</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ íŒŒì¼ ì €ì¥</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded text-xs font-bold">2ë‹¨ê³„</span>
                                        <span>ì›¹ì—ì„œ <strong class="text-blue-600">ë³µì›</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ íŒŒì¼ ì—…ë¡œë“œ</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="bg-green-200 text-green-800 px-2 py-1 rounded text-xs font-bold">ì™„ë£Œ</span>
                                        <span>ëª¨ë“  ê¸°ê¸°ì—ì„œ ë™ì¼í•œ ë°ì´í„° ì‚¬ìš© ê°€ëŠ¥! ğŸ‰</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;

            // ì•„ì´ì½˜ ì´ˆê¸°í™”
            lucide.createIcons();
        }

        // ì´ˆê¸° ë Œë”ë§
        render();
    </script>
</body>
</html>
